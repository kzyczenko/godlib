**************************************************************************************
*	SCRGRABS.S
*
*	ScreenGrab routines
*
*	[c] 2001 Reservoir Gods
**************************************************************************************

**************************************************************************************
;	EXPORTS / IMPORTS
**************************************************************************************

	XDEF	_ScreenGrab_Vbl
	XDEF	_gScreenGrabVblLockFlag

	XREF	_ScreenGrab_Update
	XREF	_gScreenGrabEnableFlag


**************************************************************************************
	TEXT
**************************************************************************************

*------------------------------------------------------------------------------------*
* FUNCTION : _ScreenGrab_Vbl
* ACTION   : interrupt routine
* CREATION : 01.05.01 PNK
*------------------------------------------------------------------------------------*

_ScreenGrab_Vbl:

	tst.b	_gScreenGrabEnableFlag
	beq		.nograb
	tas		_gScreenGrabVblLockFlag
	bne		.nograb

	movem.l	d0-a6,-(a7)
	jsr		_ScreenGrab_Update
	movem.l	(a7)+,d0-a6

	clr.b	_gScreenGrabVblLockFlag
.nograb:

	rts


**************************************************************************************
	DATA
**************************************************************************************

_gScreenGrabVblLockFlag:	dc.b	0
